<div class="detail-header">
    <a href="/admin/services" class="btn btn-sm">‚Üê Retour</a>
</div>

<div class="form-card">
    <form method="POST" action="<%= service ? '/admin/services/' + service.id : '/admin/services' %>" enctype="multipart/form-data">
        <input type="hidden" name="_csrf" value="<%= csrfToken %>">

        <div class="form-row-admin">
            <div class="form-group-admin">
                <label for="name">Nom du service *</label>
                <input type="text" id="name" name="name" required value="<%= service ? service.name : '' %>" placeholder="Ex: Manucure Simple">
            </div>
            <div class="form-group-admin">
                <label for="icon">Ic√¥ne (emoji, utilis√©e si pas de photo)</label>
                <input type="text" id="icon" name="icon" value="<%= service ? service.icon : 'üíÖ' %>" maxlength="10" style="font-size: 1.5rem;">
            </div>
        </div>

        <div class="form-group-admin">
            <label for="image">Photo du service</label>
            <% if (service && service.image) { %>
            <div style="margin-bottom: 0.5rem;">
                <img src="<%= service.image.startsWith('http') ? service.image : '/images/services/' + service.image %>" alt="<%= service.name %>" style="width: 100px; height: 100px; object-fit: cover; border-radius: 50%; border: 2px solid var(--border);">
            </div>
            <% } %>
            <input type="file" id="image" name="image" accept="image/jpeg,image/png,image/webp">
            <small>JPG, PNG ou WebP (max 5 Mo). Laissez vide pour garder la photo actuelle.</small>
        </div>

        <div class="form-row-admin">
            <div class="form-group-admin">
                <label for="price">Prix (‚Ç¨) *</label>
                <input type="number" id="price" name="price" required step="0.01" min="0" value="<%= service ? service.price : '' %>">
            </div>
            <div class="form-group-admin">
                <label for="priceUnit">Unit√© de prix</label>
                <input type="text" id="priceUnit" name="priceUnit" value="<%= service ? service.price_unit : 's√©ance' %>" placeholder="s√©ance, pose, ongle...">
            </div>
            <div class="form-group-admin">
                <label for="durationMinutes">Dur√©e (minutes) *</label>
                <input type="number" id="durationMinutes" name="durationMinutes" required min="1" max="480" value="<%= service ? service.duration_minutes : '' %>">
            </div>
        </div>

        <div class="form-group-admin">
            <label for="description">Description</label>
            <textarea id="description" name="description" rows="3"><%= service ? service.description : '' %></textarea>
        </div>

        <div class="form-group-admin">
            <label for="includes">√âl√©ments inclus (un par ligne)</label>
            <textarea id="includes" name="includes" rows="6" placeholder="Limage et mise en forme&#10;Soin des cuticules&#10;Vernis au choix"><%= service && service.includes ? service.includes.join('\n') : '' %></textarea>
            <small>Chaque ligne sera un √©l√©ment de la liste "Ce qui est inclus"</small>
        </div>

        <div class="form-group-admin">
            <label>
                <input type="checkbox" name="isActive" value="true" <%= (!service || service.is_active) ? 'checked' : '' %>>
                Service actif (visible sur le site)
            </label>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary-admin"><%= service ? 'Mettre √† jour' : 'Cr√©er le service' %></button>
            <a href="/admin/services" class="btn">Annuler</a>
        </div>
    </form>
</div>
