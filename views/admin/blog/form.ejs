<div style="margin-bottom: 1.5rem;">
    <a href="/admin/blog" class="btn btn-sm">← Retour aux articles</a>
</div>

<div class="form-card">
    <h3><%= post ? 'Modifier l\'article' : 'Nouvel article' %></h3>
    <form method="POST" action="<%= post ? `/admin/blog/${post.id}` : '/admin/blog' %>">
        <input type="hidden" name="_csrf" value="<%= csrfToken %>">

        <div class="form-row-admin">
            <div class="form-group-admin">
                <label for="title">Titre *</label>
                <input type="text" id="title" name="title" value="<%= post ? post.title : '' %>" required>
            </div>
            <div class="form-group-admin">
                <label for="slug">Slug (URL)</label>
                <input type="text" id="slug" name="slug" value="<%= post ? post.slug : '' %>" placeholder="Généré automatiquement si vide">
                <small>Ex: mon-article-de-blog</small>
            </div>
        </div>

        <div class="form-group-admin">
            <label for="excerpt">Extrait</label>
            <textarea id="excerpt" name="excerpt" rows="3" placeholder="Court résumé de l'article..."><%= post ? post.excerpt : '' %></textarea>
            <small>Affiché dans la liste des articles</small>
        </div>

        <div class="form-group-admin">
            <label for="content">Contenu (HTML)</label>
            <textarea id="content" name="content" rows="15" placeholder="Contenu de l'article en HTML..."><%= post ? post.content : '' %></textarea>
            <small>Vous pouvez utiliser des balises HTML (h2, h3, p, ul, li, a, strong, em...)</small>
        </div>

        <div class="form-row-admin">
            <div class="form-group-admin">
                <label for="coverImage">Image de couverture (URL)</label>
                <input type="url" id="coverImage" name="coverImage" value="<%= post ? post.cover_image : '' %>" placeholder="https://...">
            </div>
            <div class="form-group-admin">
                <label for="author">Auteur</label>
                <input type="text" id="author" name="author" value="<%= post ? post.author : '' %>" placeholder="Ex: Sarah">
            </div>
        </div>

        <div class="form-row-admin">
            <div class="form-group-admin">
                <label for="displayOrder">Ordre d'affichage</label>
                <input type="number" id="displayOrder" name="displayOrder" value="<%= post ? post.display_order : 0 %>" min="0">
            </div>
            <div class="form-group-admin" style="display: flex; align-items: center; gap: 0.5rem; padding-top: 1.5rem;">
                <input type="checkbox" id="isPublished" name="isPublished" <%= post && post.is_published ? 'checked' : '' %>>
                <label for="isPublished" style="margin: 0;">Publier l'article</label>
            </div>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary-admin"><%= post ? 'Mettre à jour' : 'Créer l\'article' %></button>
            <a href="/admin/blog" class="btn">Annuler</a>
        </div>
    </form>
</div>
